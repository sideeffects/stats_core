{% extends "base.html" %}
{{ request.session.name }}
{% load googlecharts %}
{% block internalbody %}
      
    <div class="graph-title">New Registrations per day</div>
    <div>
    <br>
    <div id="series_users_registered_forum_openid" class="wide graph"></div>
    <p>* Users who registered and then later logged in using OpenID will show up as OpenID registrations.</p>
    <!-- 
    <br>
    <div class="graph-title">Cumulative Registrations</div>
    <div>
    <div id="series_users_registered_forum_openid" class="wide graph"></div>
     -->
    <br>
    <div class="graph-title">Breakdown of registration methods for the selected period of time</div>
    <br>
    <div>
    <br>
     <span> &nbsp;&nbsp;&nbsp;&nbsp; Total of user registered with forum: {{ total_forum }} </span>  
     <br> 
     <span> &nbsp;&nbsp;&nbsp;&nbsp; Total of user registered with openid: {{ total_openid }} </span>   
    </div>
    <div id="series_openid_breakdown" class="wide graph"></div>
    <br>
            
    {% googlecharts %}
    
        {% data series.users_forum_openid "count1" %}
            {% col "string" "Date" %}"{{ val|date:date_format }}"{% endcol %}
            {% col "number" "Total Users Registered" %}{{ val }}{% endcol %}
            {% col "number" "Total Users Registered with Forum" %}{{ val }}{% endcol %}
            {% col "number" "Total Users Registered with Openid" %}{{ val }}{% endcol %}
        {% enddata %}
        
        {% data series.open_id_breakdown "count2" %}
           {% col "string" "Provider" %}"{{ val }}"{% endcol %}
           {% col "number" "# of users registered" %}{{ val }}{% endcol %}
        {% enddata %}
        
        options = {
            backgroundColor: "#f9f9f9",
            colors: ["#09f","#66CC33", "daa520"],
            gridlineColor: "#ddd",
            legend: "none",
            vAxis: {minValue: 0},
            chartArea: {left: 40, top: 20, width: 240, height: 180},
            width: 300,
            height: 240
        };

	    options_wide = _clone(options);
	    options_wide.chartArea.width = 880;
	    options_wide.width = 940;
	    
	    options_with_legend = _clone(options_wide);
	    options_with_legend.legend =  {position: 'in', alignment: 'center',textStyle: {color: 'black', fontSize: 12}}
	    
	    {% options "opt_count" %}
	        kind: "LineChart",
	        options: options
	    {% endoptions %}
	
	    {% options "opt_count_wide" %}
	        kind: "LineChart",
	        options: options_wide
	    {% endoptions %}

	    {% options "opt_count_wide_column" %}
            kind: "ColumnChart",
            options: options_wide
        {% endoptions %}
 
	    
	    {% options "opt_count_with_legend" %}
	       kind: "LineChart",
	       options: options_with_legend
	    {% endoptions %}
        
        {% graph "series_users_registered_forum_openid" "count1" "opt_count_with_legend" %}
        {% graph "series_openid_breakdown" "count2" "opt_count_wide_column" %}
        
    {% endgooglecharts %}

 {% endblock internalbody %}   

